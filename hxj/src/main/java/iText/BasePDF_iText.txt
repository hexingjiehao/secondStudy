1.å­¦ä¹ ã€ŠThe ABC of PDF with iTextã€‹ç”µå­æ–‡æ¡£:
    ç¬¬1ç« ï¼šæ—‹è½¬æœ¨é©¬(Carousel)å¯¹è±¡ç³»ç»Ÿ
        èµ·æºï¼šCarouselæ˜¯åæ¥çš„Acrobat(æ‚æŠ€æ¼”å‘˜)çš„æœ€åˆçš„åå­—ã€‚Acrobatæœ‰20å¤šå¹´å†å²äº†
        1.1 PDFå¯¹è±¡
            1.åŸºç¡€PDFå¯¹è±¡
                PDFæœ‰8ä¸ªåŸºæœ¬çš„å¯¹è±¡ã€‚åœ¨iTextå®ç°ä¸ºPdfObjectç±»çš„å­ç±».å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š[key-value]=[pdfå¯¹è±¡-itextå¯¹è±¡]
                Boolean               PdfBoolean
                Numberic object       PdfNumber           æœ‰Integerå’Œreal Numbersç±»å‹
                String                PdfString           ä¸¤ç§ä¹¦å†™æ–¹å¼ï¼š(å­—ç¬¦...)å’Œ<16è¿›åˆ¶æ•°>
                Name                  PdfName             æ˜¯ç”±ä¸€ç³»åˆ—å­—ç¬¦å”¯ä¸€å®šä¹‰çš„åŸå­ç¬¦å·ã€‚å‰ç¼€/  ç±»ä¼¼ä¸å˜é‡å
                Array                 PdfArray            æ ¼å¼[0 0 595 842]
                Dictionary            PdfDictionary       ç±»ä¼¼ä¸map
                Stream                PdfStream           å­—èŠ‚åºåˆ—ï¼Œå¢é‡è¯»å–ï¼Œç”¨äºå¤„ç†å¤§é‡æ•°æ®
                Null object           PdfNull
                å°è£…çš„å¯¹è±¡ï¼šPdfDateç»§æ‰¿PdfString
                          PdfRectangleç»§æ‰¿PdfArray
                          PdfAction,PdfFormField,PdfOutlineç»§æ‰¿PdfDictionary
                          PRStreamç»§æ‰¿PdfStream

            2.iTextçš„PdfObjectå®ç°
                PdfBooleanä»£ç ä½¿ç”¨ï¼šé™æ€å€¼true,false
                    PdfBoolean obj=PdfBoolean.TRUE;
                    System.out.println(obj.isBoolean());
                PdfNumberä»£ç ä½¿ç”¨ï¼š
                    PdfNumber obj=new PdfNumber(100);
                    System.out.println(obj.intValue());
                    System.out.println(obj.longValue());
                    System.out.println(obj.doubleValue());
                    System.out.println(obj.floatValue());
                PdfStringä»£ç ä½¿ç”¨ï¼š
                    PdfString obj=new PdfString("Test");
                    System.out.println(obj.isHexWriting());
                    System.out.println(obj.getEncoding());
                    System.out.println(obj.toUnicodeString());
                PdfNameä»£ç ä½¿ç”¨ï¼š
                    PdfName obj=new PdfName("CustomName")
                    System.out.println(obj.isName());
                PdfArrayä»£ç ä½¿ç”¨ï¼šå…ƒç´ ç±»å‹å¯ä»¥ä¸åŒ
                    PdfArray obj = new PdfArray();
                    obj.add(PdfName.First);
                    obj.add(new PdfString("Second"));
                    obj.add(new PdfNumber(3));
                    obj.add(PdfBoolean.FALSE);
                    System.out.println(obj.isArray());
                    System.out.println(obj.size());
                PdfDictionaryä»£ç ä½¿ç”¨ï¼šå…ƒç´ ç±»å‹å¯ä»¥ä¸åŒ
                    PdfDictionary obj = new PdfDictionary();
                    obj.put(new PdfName("Entry1"), PdfName.First);
                    obj.put(new PdfName("Entry2"), new PdfString("Second"));
                    obj.put(new PdfName("3rd"), new PdfNumber(3));
                    obj.put(new PdfName("Fourth"), PdfBoolean.FALSE);
                    System.out.println(obj.isDictionary());
                    for (PdfName key : obj.keySet()) {
                        System.out.print(key+":");
                        System.out.println(obj.get(key));
                    }
                PdfStreamä»£ç ä½¿ç”¨ï¼šåŸåˆ™ä¸Šæœ‰1ä¸ªlengthçš„é”®å€¼å¯¹
                    PdfStream obj = new PdfStream("Long stream of data stored in a FlateDecode compressed stream object".getBytes());
                    System.out.println(obj.isStream());
                    System.out.println(obj.getLength());
                PdfNullä»£ç ä½¿ç”¨ï¼š
                    PdfNull obj=PdfNull.PDF_NULL;
                    System.out.println(obj.isNull());
                PdfLiteralä»£ç ä½¿ç”¨ï¼š
                    PdfLiteral obj=new PdfLiteral("<</Type/Custom/Contents [1 2 3]>>");
                    System.out.println(obj.isLiteral());

            3.ç›´æ¥å¯¹è±¡å’Œé—´æ¥å¯¹è±¡çš„åŒºåˆ«
                ç›´æ¥å¯¹è±¡ç±»ä¼¼ä¸åŸºç¡€ç±»å‹ï¼Œé—´æ¥å¯¹è±¡ç±»ä¼¼ä¸å¼•ç”¨å¯¹è±¡ã€‚å¼•ç”¨å¯¹è±¡çš„typeå€¼æ˜¯5ã€‚åŸºç¡€å¯¹è±¡ä¸­åªæœ‰PdfStreamæ˜¯é—´æ¥å¯¹è±¡ï¼Œå…¶ä»–çš„æ˜¯ç›´æ¥å¯¹è±¡

            4.æ€»ç»“
                å­¦ä¹ pdfçš„8ä¸ªåŸºç¡€å¯¹è±¡ã€‚ç±»ä¼¼äºjavaçš„8ä¸ªåŸºç¡€æ•°æ®ç±»å‹ã€‚

        1.2 PDFæ–‡ä»¶(File)ç»“æ„
            1.PDFæ–‡ä»¶çš„å†…éƒ¨ç»“æ„
                ä¸€èˆ¬æœ‰4ä¸ªéƒ¨åˆ†ï¼šï¼ˆä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è€Œä¸æ˜¯adobeï¼‰
                    Headerï¼š1-2è¡Œã€æ ¼å¼ï¼š%PDF- ...ã€‘
                    Bodyï¼šã€æ ¼å¼ï¼š2 0 obj .... endobjã€‘
                    Cross-reference Table: ã€æ ¼å¼ï¼šxref ...ã€‘
                    Trailer:ã€æ ¼å¼ï¼štrailer ... %%EOFã€‘
            2.æ–‡ä»¶ç»“æ„çš„å˜åŒ–
                1.ç‰ˆæœ¬å˜åŒ–,webè®¿é—®ï¼Œæ–‡æ¡£å‹ç¼©
                    å¤šä¸ªäº¤å‰å¼•ç”¨è¡¨ï¼šå¢é‡ä¿®æ”¹ï¼Œæ¯”å¦‚å¤šä¸ªç­¾å
                    çº¿æ€§åŒ–çš„pdfæ–‡æ¡£ï¼šä¾¿äºwebè®¿é—®
                    å…·æœ‰å‹ç¼©å¯¹è±¡å’Œäº¤å‰å¼•ç”¨æµçš„pdfæ–‡ä»¶
            3.æ€»ç»“
                ç ”ç©¶pdfçš„4ä¸ªéƒ¨åˆ†ã€‚pdfæœ‰å¢é‡æ›´æ–°ï¼Œäº¤å‰å¼•ç”¨è¡¨å¯ä»¥å‹ç¼©åˆ°å¯¹è±¡ä¸­ã€‚å¯¹è±¡å¯ä»¥å­˜å‚¨åˆ°å¯¹è±¡æµä¸­ã€‚
        1.3 PDFæ–‡æ¡£(Document)ç»“æ„
            1.ä½¿ç”¨iText RUPSå°†æ–‡æ¡£çœ‹ä½œæ ‘ç»“æ„
                RUPSæ˜¯ä¸€ä¸ªjavaé¢æ¿ç¨‹åºï¼Œèƒ½å¤ŸæŸ¥çœ‹pdfæ–‡æ¡£çš„æ ‘å½¢ç»“æ„
            2.ä½¿ç”¨PdfReaderä»PDFä¸­è·å–å¯¹è±¡
                ä»£ç ä¸¾ä¾‹ï¼šä¸ç‰ˆæœ¬æœ‰å…³
                    PdfReader reader =new PdfReader("hello.pdf");
                    PdfDictionary trailer = reader.getTrailer();
            3.æ£€æŸ¥é¡µé¢æ ‘
                /pageå¼€å¤´
                é¡µé¢æ ‡ç­¾ï¼š/PageLabels
                éå†é¡µé¢æ ‘ï¼š
                    PdfReader reader = new PdfReader("src/main/resources/primes.pdf");
                    PdfDictionary dict = reader.getCatalog();
                    PdfDictionary pageroot = dict.getAsDict(PdfName.PAGES);
                     if (dict == null)
                        return;
                     PdfIndirectReference ref = dict.getAsIndirectObject(PdfName.PARENT);
                     if (dict.isPage()) {
                            System.out.println("Child of " + ref + ": PAGE " + (page++));
                     }else if (dict.isPages()) {
                        if (ref == null)
                            System.out.println("PAGES ROOT");
                        else
                            System.out.println("Child of " + ref + ": PAGES");
                        PdfArray kids = dict.getAsArray(PdfName.KIDS);
                        System.out.println(kids);
                        if (kids != null) {
                            for (int i = 0; i < kids.size(); i++) {
                                expand(kids.getAsDict(i));
                            }
                        }
                    }
            4.æŸ¥çœ‹é¡µé¢å­—å…¸ï¼š
                å†…å®¹æµåŠå…¶èµ„æºï¼š
                    PdfDictionarypage=reader.getPageN(1);
                    PRStreamcontents=(PRStream)page.getAsStream(PdfName.CONTENTS);
                    byte[]bytes=PdfReader.getStreamBytes(contents);
                    System.out.println(newString(bytes));
                èµ„æºå­—å…¸ï¼š
                    page=reader.getPageN(2);
                    PdfDictionaryresources=page.getAsDict(PdfName.RESOURCES);
                    for(PdfNamekey:resources.getKeys()){
                        System.out.print(key);
                        System.out.print(": ");
                        System.out.println(resources.getDirectObject(key));
                    }

                    PdfDictionaryxObjects=resources.getAsDict(PdfName.XOBJECT);
                    PRStreamxObject=(PRStream)xObjects.getAsStream(newPdfName("Xf1"));
                    for(PdfNamekey:xObject.getKeys()){
                        System.out.println(key + ": " + font.getDirectObject(key));
                    }
                    bytes=PdfReader.getStreamBytes(xObject);
                    System.out.println(newString(bytes));
                    PdfDictionaryfonts=resources.getAsDict(PdfName.FONT);
                    PdfDictionaryfont=fonts.getAsDict(newPdfName("F1"));
                    for(PdfNamekey:font.getKeys()){
                        System.out.println(key + ": " + font.getDirectObject(key));
                    }
                é¡µé¢è¾¹ç•Œå’Œå¤§å°ï¼š
                    PdfReader reader=new PdfReader("src/main/resources/pages.pdf");
                    show(reader.getPageSize(1));
                    show(reader.getPageSize(3));
                    show(reader.getPageSizeWithRotation(3));
                    show(reader.getPageSize(4));
                    show(reader.getPageSizeWithRotation(4));
                æ³¨é‡Šï¼šä¸€èˆ¬åœ¨é¡µé¢ä¸å¯è§
                    PdfArrayannots=page.getAsArray(PdfName.ANNOTS);
                    for(inti=0;i<annots.size();i++){
                        System.out.println("Annotation " + (i + 1));
                        showEntries(annots.getAsDict(i));
                    }
            5.æ–‡æ¡£ç›®å½•å­—å…¸çš„å¯é€‰æ¡ç›®
               å¿…é€‰æ¡ç›®ï¼š/Typeå’Œ/Pages
               åå­—å­—å…¸ï¼š
                    æœ‰ä¸€ä¸ªæ ‘ç»“æ„ç»„æˆã€‚key-valueæ ¼å¼ã€‚keyæ˜¯æœ‰åºå­—ç¬¦ä¸²
               æ–‡æ¡£å¯¼èˆªå’Œæ“ä½œï¼š
                    PdfReaderreader=newPdfReader("src/main/resources/primes.pdf");
                    PdfDictionarycatalog=reader.getCatalog();
                    PdfDictionarynames=catalog.getAsDict(PdfName.NAMES);
                    PdfDictionarydests=names.getAsDict(PdfName.DESTS);
                    PdfArrayarray=dests.getAsArray(PdfName.NAMES);
                    System.out.println(array.getAsString(0));
                    System.out.println(array.getAsArray(1));
               äº¤äº’å¼è¡¨å•ï¼š
                    /acroFormã€‚å¯ç”¨ä½œæœåŠ¡å™¨çš„æäº¤è¡¨å•å’Œç­¾åéœ€è¦çš„è¡¨å•
                    publicstaticvoidinspectForm(Filefile)throwsIOException{
                        System.out.print(file.getName());
                        System.out.print(": ");
                        PdfReader reader = new PdfReader(file.getAbsolutePath());
                        AcroFields form = reader.getAcroFields();
                        XfaForm xfa = form.getXfa();
                        System.out.println(xfa.isXfaPresent() ? form.getFields().size() == 0 ? "XFA form" : "Hybrid form": form.getFields().size() == 0 ? "not a form" : "AcroForm");
                        reader.close();
                    }
               æ ‡è®°çš„å†…å®¹ï¼š
                    æœ‰æ ‡è®°ä¹‹åï¼Œå°±ç±»ä¼¼ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥è¿›è¡Œå„ç§æ“ä½œ
               åµŒå…¥å¼æ–‡ä»¶ï¼š
                    å¯ä»¥æ·»åŠ é™„ä»¶ã€‚ç±»ä¼¼äºä¸€ä¸ªzipæ–‡ä»¶
               å…ƒæ•°æ®metadata:
                    xml streams
               é¢å¤–ä¿¡æ¯å­˜å‚¨åœ¨ç›®å½•ä¸­ï¼š
            6.æ€»ç»“
                ä¸»è¦æ˜¯æ–‡æ¡£çš„å„ç§ç»„æˆéƒ¨åˆ†
                
    ç¬¬2ç« ï¼šAdobeæˆåƒæ¨¡å‹
        2.1 å›¾å½¢çŠ¶æ€
            1.ç†è§£è¯­æ³•
                pdfçš„è¯­æ³•ç¬¦å·ï¼šç»§æ‰¿PostScriptè¯­è¨€ã€‚ç±»ä¼¼äºç»™å®šä¸€ä¸²è¿ç®—ç¬¦å·ï¼Œè®¡ç®—å‡ºè¯¥å€¼ã€‚å¾ˆç†Ÿæ‚‰çš„æ„Ÿè§‰
                    prefix + 10 6   ã€å…ˆåºéå†ã€‘
                    infix 10 + 6    ã€ä¸­åºéå†ã€‘
                    postfix 10 6 +  ã€ååºéå†ã€‘
                åˆ›å»ºpdfçš„5ä¸ªæ­¥éª¤ï¼š
                    1.åˆ›å»ºDocumentå¯¹è±¡
                    2.è·å–ä¸€ä¸ªPdfwriterå®ä¾‹
                    3.æ‰“å¼€ä¸€ä¸ªDocument
                    4.å¢åŠ å†…å®¹
                    5.å…³é—­ä¸€ä¸ªDocument
                5ä¸ªå›¾å½¢å¯¹è±¡ï¼š
                    1.path
                    2.text
                    3.external(å¤–éƒ¨å¯¹è±¡)
                    4.å†…è”å›¾åƒ
                    5.shading(é˜´å½±å¯¹è±¡)
            2.å›¾å½¢çŠ¶æ€æ“ä½œ
                æ„å»ºpathå¯¹è±¡ï¼šä»ç”»çº¿å¼€å§‹
                ç»˜åˆ¶å’Œå‰ªåˆ‡è·¯å¾„å¯¹è±¡ï¼šæ•°æ®ä¸Šçš„ä¸‰è§’å½¢ç»„åˆï¼Œcanvaså¯¹è±¡ï¼Œå¥‡å¶è§„åˆ™
                é¢œè‰²ï¼Œé¢œè‰²ç©ºé—´å’Œé˜´å½±ï¼šä½œç”¨äºæè¾¹å’Œå¡«å……è·¯å¾„
                    é¢œè‰²çš„é›†ä¸­ç»„æˆï¼Œæ¯”å¦‚RGB
                    è®¾å¤‡çš„é¢œè‰²ï¼Œç‚¹çš„é¢œè‰²
                    ç“·ç –æ¨¡å¼
                    é˜´å½±æ¨¡å¼ï¼šPdfShadin
                    é¢œè‰²æ“ä½œç¬¦çš„æ¦‚è¿°
                é€šç”¨å›¾å½¢çŠ¶æ€ç®—å­ï¼šm,l,s,w
                    çº¿å®½ï¼šw
                    çº¿å¸½ï¼šçº¿çš„ä¸¤ç«¯ line cap, l
                    çº¿è¿æ¥æ ·å¼ï¼šsetLineJoin(), s
                    æ–œæ¥é™åˆ¶:canvas.setMiterLimit(),  m
                    dashæ¨¡å¼ï¼š ç›´çº¿ä¸åŒä½ç½®çš„ç ´æŠ˜å·ï¼Œå½¢æˆå„ç§è™šçº¿
                ç‰¹æ®Šå›¾å½¢çŠ¶æ€ç®—å­ï¼šcm,q,Q
                    åæ ‡ç³»å˜æ¢ï¼šåæ ‡åŸç‚¹åœ¨å·¦ä¸‹è§’ã€‚canvas.concatCTM(1,0,0,1,100,40); çº¿æ€§ä»£æ•° cm
                    ä¿å­˜å’Œæ¢å¤å›¾å½¢çŠ¶æ€å †æ ˆï¼šæ‰€æœ‰å›¾å½¢çŠ¶æ€æ“ä½œéƒ½æ˜¯åœ¨ä¸Šä¸€ä¸ªæ“ä½œçš„åŸºç¡€ä¸Šè¿›è¡Œçš„
                XObjects:
                    è¡¨æ ¼XObjectï¼š
                    PDFå’Œå›¾åƒï¼šPdfContentBytecanvas=writer.getDirectContent();
                              Imageimg=Image.getInstance(IMG);
                              canvas.addImage(img,20,0,0,20,36,786);
                å›¾å½¢çŠ¶æ€å­—å…¸ï¼šPdfContentBytecanvas=writer.getDirectContent();
                            PdfGStategs=newPdfGState();
                            gs.put(newPdfName("LW"),newPdfNumber(3));
                            gs.put(newPdfName("LJ"),newPdfNumber(1));
                            PdfArraydashArray=newPdfArray(newint[]{12,1});
                            PdfArraydashPattern=newPdfArray();
                            dashPattern.add(dashArray);
                            dashPattern.add(newPdfNumber(0));
                            gs.put(newPdfName("D"),dashPattern);
                            canvas.setGState(gs);
                å›¾å½¢çŠ¶æ€å’Œé€æ˜åº¦ï¼š
                    é€æ˜åº¦ï¼šPdfGStateg s1=newPdfGState();
                           gs1.setFillOpacity(0.5f);
                           cb.setGState(gs1);
                    é€æ˜ç»„ï¼š
                        PdfTemplate tp=cb.createTemplate(200,200);
                        PdfTransparencyGroup group=new PdfTransparencyGroup();
                        tp.setGroup(group);
                    éš”ç¦»å’Œæ·˜æ±°ï¼š
                        å›¾å½¢çš„åˆé›†å’Œå·®é›†ç­‰æ“ä½œ
                        PdfTemplate tp=cb.createTemplate(200,200);
                        pictureCircles(0,0,tp);
                        PdfTransparencyGroup group=new PdfTransparencyGroup();
                        group.setIsolated(true);
                        group.setKnockout(true);
                        tp.setGroup(group);
                        cb.addTemplate(tp,50+gap,500);
                æ©è”½å’Œå‰ªåˆ‡å›¾åƒï¼šæ“¦é™¤æ“ä½œ
                    ç¡¬è’™ç‰ˆå’Œè½¯è’™ç‰ˆImage mask = Image.getInstance(8, 8, 1, 1, circledata);
                                mask.makeMask();
                                mask.setInverted(true);
                    å‰ªåˆ‡å›¾ç‰‡ï¼šImage clipped=Image.getInstance(t);
                            clipped.scalePercent(50);
                            canvas.clip();
            3.æ€»ç»“
                å›¾åƒçš„å†…éƒ¨ä»£ç åŸç†å’Œæ•ˆæœå¯¹æ¯”

        2.2 æ–‡æœ¬çŠ¶æ€
            1.æ–‡æœ¬å¯¹è±¡ï¼š
                æ–‡æœ¬çŠ¶æ€æ“ä½œï¼š
                æ–‡æœ¬å®šä½ç¬¦å·ï¼š
                æ–‡æœ¬æ˜¾ç¤ºæ“ä½œï¼š
                æ­£åœ¨è¿è¡Œçš„æ–‡æœ¬æ“ä½œç¬¦ï¼šcanvas.beginText();
                                   canvas.moveText(36,788);
                                   canvas.setFontAndSize(BaseFont.createFont(),12);
                                   canvas.showText("HelloWorld");
                                   canvas.endText();
            2.ä»‹ç»å­—ä½“ï¼š
                é»˜è®¤æœ‰14ä¸­æ ‡å‡†å­—ä½“
                å­—ä½“åç¼€ï¼š
                pdfä¸­çš„å­—ä½“ï¼š
            3.åœ¨PDFä¸­ä½¿ç”¨å­—ä½“
                ç®€å•å­—ä½“ï¼šé»˜è®¤å†…åµŒ
                æ²¡æœ‰å†…åµŒçš„å­—ä½“ï¼š
                åµŒå…¥çš„å­—ä½“ï¼š
                ç¼–ç ï¼š
                å­—ä½“å­é›†ï¼š
                åˆé€‚çš„ç¼–ç ï¼š
                å¤åˆå­—ä½“ï¼š
            4.åœ¨iTextä¸­ä½¿ç”¨å­—ä½“
                BaseFontå®ç°çš„æ¦‚è¿°ï¼š
                ä¸€ä¸ªType3å­—ä½“çš„ä¾‹å­ï¼šFont font=new Font(t3,20);
                                   Paragraphp=new Paragraph("ITEXT",font);
                                   document.add(p);
                                   p=new Paragraph(20,"I\nT\nE\nX\nT",font);
                                   document.add(p);
                ä¸€ä¸ªCJKFontä¾‹å­ï¼š
            5.æ€»ç»“
                è®¨è®ºæ–‡æœ¬å’Œå­—ä½“
        2.3 æ ‡è®°çš„å†…å®¹ã€ğŸˆšï¸ã€‘
    ç¬¬3ç« ï¼šæ³¨é‡Šå’Œè¡¨å•å­—æ®µã€ğŸˆšï¸ã€‘
        -æ³¨é‡Šã€ğŸˆšï¸ã€‘
        -äº¤äº’å¼è¡¨å•ã€ğŸˆšï¸ã€‘
