å­¦ä¹ vert.xè¯­æ³•ï¼š(é»˜è®¤æ˜¯ä½¿ç”¨javaç‰ˆæœ¬)
    1.æ¦‚è¦ï¼šeclipse Vert.xæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œèƒ½å¤Ÿåœ¨Javaè™šæ‹Ÿæœºä¸Šæ„å»ºå“åº”å¼åº”ç”¨ã€‚
         å®ƒæ˜¯åŸºäºäº‹ä»¶é©±åŠ¨å¹¶ä¸”éé˜»å¡å¼çš„ã€‚å®ƒæ˜¯å¤šè¯­è¨€æ”¯æŒçš„ã€‚
         æœ€æ–°ç‰ˆæœ¬æ˜¯3.6.2
         è·å–æ–¹å¼ï¼šå®˜ç½‘ä¸‹è½½zip/.tar.gz
                     From NPMï¼š
                        npm install vertx3-min
                        npm install vertx3-full
                     From Dockerï¼š
                        docker run -i -t vertx/vertx3-exec
                     From SDKManï¼š
                        sdk install vertx
                     From Homebrewï¼š
                        brew install vert.x
         å¿«é€Ÿåˆ›å»ºé¡¹ç›®ï¼šhttp://start.vertx.io
    2.æ•™ç¨‹æ–‡æ¡£ï¼š
        1. hello worldé¡¹ç›®å’Œå‡ºç‰ˆä¹¦
        2. å¸¸ç”¨çš„åŠŸèƒ½ï¼šæ ¸å¿ƒ / web / æ•°æ®è®¿é—® / å“åº”å¼ / å¾®æœåŠ¡ / IoT / éªŒè¯å’Œæˆæƒ
                     é›†æˆ / äº‹ä»¶æ€»çº¿æ¡¥ / å¼€å‘ç»´æŠ¤ / æµ‹è¯• / é›†ç¾¤ / æœåŠ¡ / äº‘ / å…ˆè¿›çš„
        3. æ ¸å¿ƒåŠŸèƒ½: javaç‰ˆæœ¬ä»£ç APIçš„åœ°å€ï¼šhttps://vertx.io/docs/apidocs/
                    javaç‰ˆæœ¬æ‰‹å†Œåœ°å€ï¼šhttps://vertx.io/docs/vertx-core/java/
            1.åŠŸèƒ½ç‚¹ï¼šå†™TCPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨
                     å†™HTTPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼ŒåŒ…æ‹¬WebSockets
                     Event Bus(äº‹ä»¶æ€»çº¿)
                     å…±äº«æ•°æ®(æœ¬åœ°mapå’Œé›†ç¾¤åˆ†å¸ƒå¼map)
                     å‘¨æœŸæ€§å’Œå»¶è¿Ÿä½œç”¨
                     éƒ¨ç½²å’Œå–æ¶ˆéƒ¨ç½²Verticles
                     æ•°æ®æŠ¥å¥—æ¥å­—
                     åŸŸåè§£æå®¢æˆ·ç«¯
                     æ–‡ä»¶ç³»ç»Ÿè®¿é—®
                     é«˜å¯ç”¨æ€§
                     æœ¬åœ°ä¼ è¾“
                     é›†ç¾¤
            2.èµ„æºä¾èµ–ï¼šdependencies {
                        compile 'io.vertx:vertx-core:3.6.2'
                       }
            3.åˆ›å»ºVertxå¯¹è±¡ï¼šå®ƒæ˜¯æ§åˆ¶ä¸­å¿ƒã€‚å¯ä»¥è®¾ç½®é€‰é¡¹ã€‚
                Vertx vertx = Vertx.vertx();
                Vertx vertx = Vertx.vertx(new VertxOptions().setWorkerPoolSize(40));
            4.æ–¹æ³•çš„fluenté£æ ¼ï¼šrequest.response().putHeader("Content-Type", "text/plain").write("some text").end();
            5.äº‹ä»¶é©±åŠ¨ï¼Œå›è°ƒå¼å¥æŸ„ï¼švertx.setPeriodic(1000, id -> {
                                   System.out.println("timer fired!");
                                 });
            6.Vert.xçš„APIï¼šå®ƒæ˜¯éé˜»å¡å¼çš„ã€‚
            7.å“åº”å™¨å’Œå¤šé‡å“åº”å™¨æ¨¡å¼ï¼šVert.xä¼ é€’äº‹ä»¶åˆ°å¥æŸ„ï¼Œä½¿ç”¨ä¸€ä¸ªevent loopçš„çº¿ç¨‹ã€‚
                                  æ¯ä¸€ä¸ªVertxå®ä¾‹ç»´æŒå‡ ä¸ªevent loop, nodejsåªæœ‰ä¸€ä¸ªevent loopã€‚
                æ³¨æ„ï¼šä¸èƒ½è‡ªå·±é˜»å¡event loopã€‚ç¦æ­¢çš„æ“ä½œæœ‰ï¼šçº¿ç¨‹ç¡çœ ï¼Œç­‰å¾…é”æˆ–è€…ä¿¡å·ç›‘è§†å™¨ï¼Œåšé•¿æ—¶é—´çš„æ•°æ®åº“æ“ä½œï¼Œåšå¤æ‚çš„è®¡ç®—ï¼Œæ­»å¾ªç¯
            8.è¿è¡Œé˜»å¡ä»£ç ï¼šJDBCçš„APIæ˜¯åŒæ­¥çš„ï¼Œvertxä¸èƒ½ä½¿ç”¨å®ƒå¼‚æ­¥ã€‚è§£å†³åŠæ³•æ˜¯executeBlocking() æˆ–è€… workVerticle,å®ƒæœ‰å·¥ä½œæ± ã€‚
                vertx.executeBlocking(future -> {
                  String result = someAPI.blockingMethod("hello");
                  future.complete(result);
                }, res -> {
                  System.out.println("The result is: " + res.result());
                });

                WorkerExecutor executor = vertx.createSharedWorkerExecutor("my-worker-pool");
                executor.executeBlocking(future -> {
                  String result = someAPI.blockingMethod("hello");
                  future.complete(result);
                }, res -> {
                  System.out.println("The result is: " + res.result());
                });
                executor.close();
            9.å¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„å…¬å…±å¤„ç†ï¼šä½¿ç”¨Future<T> ,è¢«æœåŠ¡å™¨ç›‘å¬æ˜¯å¦å®Œæˆã€‚
                CompositeFuture.all(future...).setHandler(ar -> {
                  if (ar.succeeded()) {

                  } else {

                  }
                });
                å¤šä¸ªfutureä¹‹é—´çš„æ‰§è¡Œé¡ºåºã€‚compose()
            10.Verticleçš„æ¦‚å¿µï¼šé€šè¿‡ç»§æ‰¿AbstractVerticleå¯ä»¥è‡ªå®šä¹‰Verticleã€‚
                ä¸æ‰“ç ´é»„é‡‘è§„åˆ™çš„è‡ªå®šä¹‰å¼€å§‹/ç»“æŸæ–¹æ³•ï¼šæ ¸å¿ƒæ˜¯Futureå‚æ•°å’Œfuture.complete()æ–¹æ³•
                public class MyVerticle extends AbstractVerticle {
                 private HttpServer server;
                 public void start(Future<Void> startFuture) {
                   server = vertx.createHttpServer().requestHandler(req -> {
                     req.response()
                       .putHeader("content-type", "text/plain")
                       .end("Hello from Vert.x!");
                     });
                   server.listen(8080, res -> {
                     if (res.succeeded()) {
                       startFuture.complete();
                     } else {
                       startFuture.fail(res.cause());
                     }
                   });
                 }
                }
                1.Verticleçš„ç±»å‹ï¼š
                    Standardï¼š ä½¿ç”¨event loopçº¿ç¨‹ã€‚æ‰€æœ‰æ“ä½œéƒ½æ˜¯åœ¨åŒä¸€ä¸ªevent loopä¸Šã€‚
                    Workerï¼š ä»work poolä¸­ä½¿ç”¨çº¿ç¨‹ã€‚ä¸€ä¸ªå®ä¾‹æ°¸è¿œä¸ä¼šç”±å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚
                            ä¸»è¦ç”¨æ¥è°ƒç”¨é˜»å¡å—ä»£ç ã€‚åˆ›å»ºWork verticlesã€‚
                            DeploymentOptions options = new DeploymentOptions().setWorker(true);
                            vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", options);
                    Multi-threaded worker: ä»work poolä¸­ä½¿ç”¨çº¿ç¨‹ã€‚ä¸€ä¸ªå®ä¾‹å¯ä»¥ç”±å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚
                        eploymentOptions options = new DeploymentOptions()
                          .setWorker(true)
                          .setInstances(5) // matches the worker pool size below
                          .setWorkerPoolName("the-specific-pool")
                          .setWorkerPoolSize(5);
                        vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", options);

                2.éƒ¨ç½²Verticles: ä½¿ç”¨æ–¹æ³•deployVerticle(),åªæœ‰Javaç‰ˆæœ¬
                    Verticle myVerticle = new MyVerticle();
                    vertx.deployVerticle(myVerticle);
                    ä¸åŒç±»å‹çš„verticaléƒ¨ç½²ï¼š(java,javascript,ruby)
                        vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle");
                        vertx.deployVerticle("verticles/myverticle.js");
                        vertx.deployVerticle("verticles/my_verticle.rb");
                3.åŠ è½½Verticle Factories: ä½¿ç”¨registerVerticleFactory() å’Œ unregisterVerticleFactory()
                4.éƒ¨ç½²å®Œæˆå’Œå–æ¶ˆéƒ¨ç½²å¥æŸ„ï¼šundeploy
                    vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", res -> {
                      if (res.succeeded()) {
                        System.out.println("Deployment id is: " + res.result());
                      } else {
                        System.out.println("Deployment failed!");
                      }
                    });
                5.æŒ‡å®šverticalå®ä¾‹çš„æ•°é‡ï¼šDeploymentOptions options = new DeploymentOptions().setInstances(16);
                                         vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", options);
                6.ä¼ é€’é…ç½®å¯¹è±¡åˆ°verticalï¼šJsonObject config = new JsonObject().put("name", "tim").put("directory", "/blah");
                                        DeploymentOptions options = new DeploymentOptions().setConfig(config);
                                        vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", options);
                7.è®¿é—®ç¯å¢ƒå˜é‡ï¼šSystem.getProperty("prop");
                              System.getenv("HOME");
                8.è¿è¡ŒVerticleå‘½ä»¤ï¼šä¸‹è½½zip,åœ¨binç›®å½•ä¸‹æ‰§è¡Œvertx run xxx.java
                9.ä¸Šä¸‹æ–‡å¯¹è±¡ï¼šå®ƒç»‘å®šåˆ°event loopçº¿ç¨‹ã€‚
                    Context context = vertx.getOrCreateContext();
                    if (context.isEventLoopContext()) {
                      System.out.println("Context attached to Event Loop");
                    } else if (context.isWorkerContext()) {
                      System.out.println("Context attached to Worker Thread");
                    } else if (context.isMultiThreadedWorkerContext()) {
                      System.out.println("Context attached to Worker Thread - multi threaded worker");
                    } else if (! Context.isOnVertxThread()) {
                      System.out.println("Context not attached to a thread managed by vert.x");
                    }

                    final Context context = vertx.getOrCreateContext();
                    context.put("data", "hello");
                    context.runOnContext((v) -> {
                      String hello = context.get("data");
                    });
                10.æ‰§è¡Œå‘¨æœŸæ€§å’Œå»¶è¿ŸåŠ¨ä½œï¼š
                    long timerID = vertx.setTimer(1000, id -> {
                      System.out.println("And one second later this is printed");
                    });
                    System.out.println("First this is printed");

                    long timerID = vertx.setPeriodic(1000, id -> {
                      System.out.println("And every second this is printed");
                    });
                    System.out.println("First this is printed");

                    vertx.cancelTimer(timerID);
            11.Event Bus: äº‹ä»¶æ€»çº¿ã€‚æ³¨å†Œå¥æŸ„ï¼Œå–æ¶ˆæ³¨å†Œå¥æŸ„ï¼Œå‘é€æ¶ˆæ¯ã€‚
                åœ°å€ï¼šä¿¡æ¯é€šè¿‡event buså‘é€åˆ°åœ°å€ã€‚
                å¥æŸ„ï¼šæ¶ˆæ¯è¢«å¥æŸ„æ¥å—ï¼Œä½ åœ¨ä¸€ä¸ªåœ°å€æ³¨å†Œä¸€ä¸ªå¥æŸ„ã€‚
                    è·å–event bus / æ³¨å†Œå¥æŸ„ / å–æ¶ˆæ³¨å†Œå¥æŸ„ / å‘å¸ƒæ¶ˆæ¯ / å‘é€æ¶ˆæ¯ / è®¾ç½®æ¶ˆæ¯å¤´ / æ¶ˆæ¯é¡ºåº / æ¶ˆæ¯å¯¹è±¡
                    ç¡®è®¤æ¶ˆæ¯ï¼Œå‘é€å›å¤ / å‘é€è¶…æ—¶ / å‘é€é”™è¯¯ / æ¶ˆæ¯ä»£ç  / é›†ç¾¤äº‹ä»¶æ€»çº¿ / é›†ç¾¤ç¨‹åº / å‘½ä»¤è¡Œé›†ç¾¤
                EventBus eb = vertx.eventBus();

                MessageConsumer<String> consumer = eb.consumer("news.uk.sport");
                consumer.handler(message -> {
                  System.out.println("I have received a message: " + message.body());
                });

                consumer.completionHandler(res -> {
                  if (res.succeeded()) {
                    System.out.println("The handler registration has reached all nodes");
                  } else {
                    System.out.println("Registration failed!");
                  }
                });

                //å¹¿æ’­æ“ä½œï¼Œæ‰€æœ‰handleréƒ½èƒ½å¤Ÿæ¥æ”¶
                eventBus.publish("news.uk.sport", "Yay! Someone kicked a ball");
                //ç«äº‰æ“ä½œï¼Œåªæœ‰å…¶ä¸­ä¸€ä¸ªèƒ½å¤Ÿæ¥æ”¶
                eventBus.send("news.uk.sport", "Yay! Someone kicked a ball");
                DeliveryOptions options = new DeliveryOptions();
                options.addHeader("some-header", "some-value");
                eventBus.send("news.uk.sport", "Yay! Someone kicked a ball", options);

                MessageConsumer<String> consumer = eventBus.consumer("news.uk.sport");
                consumer.handler(message -> {
                  System.out.println("I have received a message: " + message.body());
                  message.reply("how interesting!");
                });

                eventBus.send("news.uk.sport", "Yay! Someone kicked a ball across a patch of grass", ar -> {
                  if (ar.succeeded()) {
                    System.out.println("Received reply: " + ar.result().body());
                  }
                });
            12.é…ç½®event bus: ä¸»è¦æ˜¯TCPè¿æ¥æ–¹é¢ã€‚æœ‰æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ–¹é¢ã€‚æ¯”å¦‚è®¾ç½®é›†ç¾¤çš„ç«¯å£ç­‰
                VertxOptions options = new VertxOptions()
                    .setEventBusOptions(new EventBusOptions()
                        .setSsl(true)
                        .setKeyStoreOptions(new JksOptions().setPath("keystore.jks").setPassword("wibble"))
                        .setTrustStoreOptions(new JksOptions().setPath("keystore.jks").setPassword("wibble"))
                        .setClientAuth(ClientAuth.REQUIRED)
                    );

                Vertx.clusteredVertx(options, res -> {
                  if (res.succeeded()) {
                    Vertx vertx = res.result();
                    EventBus eventBus = vertx.eventBus();
                    System.out.println("We now have a clustered event bus: " + eventBus);
                  } else {
                    System.out.println("Failed: " + res.cause());
                  }
                });
            13.æ•°æ®ä¼ è¾“å€¼ï¼šJSON Objectå’ŒJSON Arraysã€‚
                JsonObject: åˆ›å»ºï¼Œè·å–ï¼Œè®¾å€¼ï¼Œæ˜ å°„æˆå¯¹è±¡ã€‚å¯¹è±¡è¦åºåˆ—åŒ–å’Œget/setæ–¹æ³•ã€‚
                    String jsonString = "{\"foo\":\"bar\"}";
                    JsonObject object = new JsonObject(jsonString);

                    Map<String, Object> map = new HashMap<>();
                    map.put("foo", "bar");
                    map.put("xyz", 3);
                    JsonObject object = new JsonObject(map);

                    object.put("foo", "bar").put("num", 123).put("mybool", true);

                    String val = jsonObject.getString("some-key");
                    int intVal = jsonObject.getInteger("some-other-key");

                    request.bodyHandler(buff -> {
                      JsonObject jsonObject = buff.toJsonObject();
                      User javaObject = jsonObject.mapTo(User.class);
                    });
                JsonArray:
                    String jsonString = "[\"foo\",\"bar\"]";
                    JsonArray array = new JsonArray(jsonString);
                    array.add("foo").add(123).add(false);
                    String val = array.getString(0);
                    Integer intVal = array.getInteger(1);
                    Boolean boolVal = array.getBoolean(2);
            14.ç¼“å­˜åŒºbuffers: Buffer.buffer()å¯ä»¥åˆ›å»ºï¼ŒappendXXX()å¯ä»¥æ‰©å±•ã€‚
                Buffer buff = Buffer.buffer("some string", "UTF-16");
                byte[] bytes = new byte[] {1, 3, 5};
                Buffer buff = Buffer.buffer(bytes);
                Buffer buff = Buffer.buffer(10000);

                buff.appendInt(123).appendString("hello\n");
                socket.write(buff);
                buff.setInt(1000, 123);
                buff.setString(0, "hello");
                for (int i = 0; i < buff.length(); i += 4) {
                  System.out.println("int value at " + i + " is " + buff.getInt(i));
                }
                //æ— ç¬¦å·æ•°æ®
                Buffer buff = Buffer.buffer(128);
                int pos = 15;
                buff.setUnsignedByte(pos, (short) 200);
                System.out.println(buff.getUnsignedByte(pos));
            15.å†™TCPæœåŠ¡å’Œå®¢æˆ·ç«¯è¿æ¥ï¼š åˆ›å»ºå’Œå…³é—­TCPæœåŠ¡å™¨ï¼Œé…ç½®TCPæœåŠ¡å™¨ï¼Œå¼€å§‹æœåŠ¡å™¨ç›‘å¬ï¼Œè·å–é€šçŸ¥ï¼Œä»socketé˜…è¯»ä¹¦å†™æ•°æ®ï¼Œå…³é—­å¥æŸ„å’Œå¤„ç†å¼‚å¸¸
                                    æ›´æ–°è¿æ¥ï¼ŒSSL/TLS
                                    åˆ›å»ºå’Œé…ç½®TCPå®¢æˆ·ç«¯ï¼Œé…ç½®è¿æ¥ï¼Œæ—¥å¿—ç½‘ç»œæ´»åŠ¨ï¼Œä½¿ç”¨å®¢æˆ·ç«¯ä»£ç†ã€‚
                æ³¨æ„ï¼šé»˜è®¤ä¸»æœº0.0.0.0,ç›‘å¬æ‰€æœ‰åˆé€‚åœ°å€ï¼Œé»˜è®¤ç«¯å£0ï¼ŒæŒ‡ç¤ºæœåŠ¡å™¨æ‰¾åˆ°éšæœºæœªä½¿ç”¨æœ¬åœ°ç«¯å£å¹¶ä½¿ç”¨å®ƒ
                ä»£ç ä¸¾ä¾‹ï¼š
                    NetServerOptions options = new NetServerOptions().setPort(4321);
                    NetServer server = vertx.createNetServer(options);
                    server.listen(1234, "localhost",handle);
                    server.listen(0, "localhost", handle);

                    server.connectHandler(socket -> {
                    });

                    //ä»socketè¯»å–å’Œå†™å…¥æ•°æ®
                    server.connectHandler(socket -> {
                      socket.handler(buffer -> {
                        System.out.println("I received some bytes: " + buffer.length());
                      });
                    });
                    socket.write("some data", "UTF-16");
                    socket.closeHandler(v -> {
                      System.out.println("The socket has been closed");
                    });

                    //å‘é€æ–‡ä»¶èµ„æºåˆ°socket
                    socket.sendFile("myfile.dat");

                    //åˆ›å»ºTCPå®¢æˆ·ç«¯,å¯ä»¥è®¾ç½®é‡è¿æ¬¡æ•°ã€‚
                    NetClientOptions options = new NetClientOptions().setConnectTimeout(10000)
                                                    .setReconnectAttempts(10)
                                                    .setReconnectInterval(500);
                    NetClient client = vertx.createNetClient(options);
                    client.connect(4321, "localhost", handle);

                    //è®¾ç½®æœåŠ¡å™¨çš„è¯ä¹¦å’Œç§˜é’¥
                    NetServerOptions options = new NetServerOptions().
                      setSsl(true).
                      setClientAuth(ClientAuth.REQUIRED).
                      setTrustStoreOptions(
                        new JksOptions().
                          setPath("/path/to/your/truststore.jks").
                          setPassword("password-of-your-truststore")
                      );
            16.å†™HTTPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼š Vert.xæ”¯æŒåè®®http1.0,1.1,1.2
                HttpServerOptions options = new HttpServerOptions()
                    .setUseAlpn(true)
                    .setSsl(true)
                    .setKeyStoreOptions(new JksOptions().setPath("/path/to/my/keystore"));
                HttpServer server = vertx.createHttpServer(options);

                //åˆ›å»ºè¯·æ±‚
                vertx.createHttpServer().requestHandler(request -> {
                  request.response().end("Hello world");
                }).listen(8080);

                MultiMap headers = request.headers();
                System.out.println("User agent is " + headers.get("user-agent"));
                System.out.println("User agent is " + headers.get("User-Agent"));

                HttpServerResponse response = request.response();
                response.write("hello world!", "UTF-16");
                response.end();

                //è®¾ç½®å“åº”å¤´
                HttpServerResponse response = request.response();
                MultiMap headers = response.headers();
                headers.set("content-type", "text/html");
                headers.set("other-header", "wibble");

                //å“åº”ä½“ä½¿ç”¨æ–‡ä»¶
                vertx.createHttpServer().requestHandler(request -> {
                  String file = "";
                  if (request.path().equals("/")) {
                    file = "index.html";
                  } else if (!request.path().contains("..")) {
                    file = request.path();
                  }
                  request.response().sendFile("web/" + file);
                }).listen(8080);

                //å‘é€httpè¯·æ±‚
                HttpClient client = vertx.createHttpClient();
                client.getNow(8080, "myserver.mycompany.com", "/some-uri", response -> {
                  System.out.println("Received response with status code " + response.statusCode());
                });

                //å‘é€httpè¯·æ±‚ï¼Œend()ç”¨äºç»“æŸè¯·æ±‚
                client.request(HttpMethod.GET, "some-uri", response -> {
                  System.out.println("Received response with status code " + response.statusCode());
                }).end();

                //å¤„ç†httpå¼‚å¸¸
                HttpClientRequest request = client.post("some-uri", response -> {
                  if (response.statusCode() == 200) {
                    System.out.println("Everything fine");
                    return;
                  }
                  if (response.statusCode() == 500) {
                    System.out.println("Unexpected behavior on the server side");
                    return;
                  }
                });
                request.end();

                //æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯è¿æ¥
                HttpServer server = vertx.createHttpServer(http2Options);
                server.connectionHandler(connection -> {
                  System.out.println("A client connected");
                });

                request.connectionHandler(connection -> {
                  System.out.println("Connected to the server");
                });

                //ç”¨vertxæ¥ä½¿ç”¨https
                server.websocketHandler(websocket -> {
                  if (websocket.path().equals("/myapi")) {
                    websocket.reject();
                  } else {
                  }
                });

                client.websocket("/some-uri", websocket -> {
                  System.out.println("Connected!");
                });

                //ä½¿ç”¨ä»£ç†æ¥å¤„ç†httpè¿æ¥
                HttpClientOptions options = new HttpClientOptions()
                    .setProxyOptions(new ProxyOptions()
                    .setType(ProxyType.HTTP)
                        .setHost("localhost")
                        .setPort(3128)
                        .setUsername("username")
                        .setPassword("secret"));
                HttpClient client = vertx.createHttpClient(options);
            17.Vert.xçš„å…±äº«æ•°æ®ï¼š
                æœ¬åœ°å…±äº«æ•°æ®ï¼šSharedData sd = vertx.sharedData();
                            LocalMap<String, String> map1 = sd.getLocalMap("mymap1");
                å¼‚æ­¥å…±äº«æ•°æ®ï¼šSharedData sd = vertx.sharedData();
                            sd.<String, String>getAsyncMap("mymap", res -> {
                                 if (res.succeeded()) {
                                   AsyncMap<String, String> map = res.result();
                                 } else {
                                 }
                            });
                å¼‚æ­¥é”ï¼šsd.getLock("mylock", res -> {
                          if (res.succeeded()) {
                            Lock lock = res.result();
                            vertx.setTimer(5000, tid -> lock.release());
                          } else {
                          }
                       });
                å¼‚æ­¥è®¡æ•°å™¨ï¼šsd.getCounter("mycounter", res -> {
                            if (res.succeeded()) {
                              Counter counter = res.result();
                            } else {
                            }
                          });
            18.Vert.xä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿï¼š æœ‰é˜»å¡æ“ä½œå’Œéé˜»å¡æ“ä½œã€‚å¼‚æ­¥æ“ä½œæ–‡ä»¶
                FileSystem fs = vertx.fileSystem();
                fs.copy("foo.txt", "bar.txt", res -> {
                  if (res.succeeded()) {
                  } else {
                  }
                });

                OpenOptions options = new OpenOptions();
                fileSystem.open("myfile.txt", options, res -> {
                  if (res.succeeded()) {
                    AsyncFile file = res.result();
                  } else {
                  }
                });
            19.æ•°æ®æŠ¥å¥—æ¥å­—UDPï¼šåˆ›å»ºå‘é€å’Œæ¥æ”¶UDP
                DatagramSocket socket = vertx.createDatagramSocket(new DatagramSocketOptions());
                Buffer buffer = Buffer.buffer("content");
                socket.send(buffer, 1234, "10.0.0.1", asyncResult -> {
                  System.out.println("Send succeeded? " + asyncResult.succeeded());
                });
                socket.listen(1234, "0.0.0.0", asyncResult -> {
                  if (asyncResult.succeeded()) {
                    socket.handler(packet -> {
                    });
                  } else {
                    System.out.println("Listen failed" + asyncResult.cause());
                  }
                });
            20.åŸŸåè§£æå®¢æˆ·ç«¯ï¼šæœ‰æŸ¥æ‰¾ipv4client.lookup4(),æœ‰æŸ¥æ‰¾ipv6çš„æ–¹æ³•client.lookup6(),è§£ææ‰€æœ‰ipv4åŒåè®°å½•client.resolveA()
                DnsClient client = vertx.createDnsClient(new DnsClientOptions()
                  .setPort(53)
                  .setHost("10.0.0.1")
                  .setQueryTimeout(10000)
                );
                client.lookup("vertx.io", ar -> {
                  if (ar.succeeded()) {
                    System.out.println(ar.result());
                  } else {
                    System.out.println("Failed to resolve entry" + ar.cause());
                  }
                });
            21.æµStreams: é“¾å¼å¤„ç†ï¼Œä¸»è¦æ˜¯æœåŠ¡å™¨çš„è¿æ¥å¤„ç†ã€‚
                NetServer server = vertx.createNetServer(
                    new NetServerOptions().setPort(1234).setHost("localhost")
                );
                server.connectHandler(sock -> {
                  Pump.pump(sock, sock).start();
                }).listen();
            22.è®°å½•è§£æå™¨ï¼šèƒ½å¤Ÿè§£æåè®®
                final RecordParser parser = RecordParser.newDelimited("\n", h -> {
                  System.out.println(h.toString());
                });
            23.Jsonè§£æå™¨ï¼šJsonParser parser = JsonParser.newParser();
                          parser.exceptionHandler(err -> {
                          });
            24.çº¿ç¨‹å®‰å…¨ï¼šVert.xå¯¹è±¡å¤§éƒ¨åˆ†æ˜¯çº¿ç¨‹å®‰å…¨çš„
            25.Vert.xæœ‰å…³çš„å‘½ä»¤è¡Œæ“ä½œï¼š
                vertx run MyVerticle.java
                vertx run MyVerticle.java -instances 10
                vertx version
                java -jar xx..jar

âš ï¸âš ï¸âš ï¸ï¼švertxå‘é€httpè¯·æ±‚æ—¶ï¼Œå¯èƒ½ä¼šæŠ¥é”™ä¸»æœºæ— æ³•è§£æã€‚
    å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼šjava.net.UnknownHostException: failed to resolve 'xiongjie-1258920061.cos.ap-shanghai.myqcloud.com' after 2 queries

    åŸå› æ˜¯ï¼švertxä½¿ç”¨è‡ªå¸¦çš„åœ°å€è§£æå™¨è€Œä¸æ˜¯jvmå†…ç½®çš„åœ°å€è§£æå™¨ã€‚é€šå¸¸ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„hostsæ–‡ä»¶æˆ–è€…DNSæŸ¥è¯¢æ¥è§£æä¸»æœºçš„IPåœ°å€ã€‚
           vertxé»˜è®¤ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„DNSæœåŠ¡å™¨ï¼Œå¦‚æœå¤±æ•ˆï¼Œåˆ™ä½¿ç”¨googleçš„DNSæœåŠ¡å™¨è§£æåœ°å€ã€‚

           å¦å¤–ï¼šå½“æœåŠ¡å™¨æ²¡æœ‰åŠæ—¶å“åº”ï¼Œä¼šè‡ªåŠ¨è¿›è¡ŒDNSåˆ—è¡¨çš„ä¸‹ä¸€ä¸ªä¸»æœºè§£æã€‚é»˜è®¤åªæœ‰4æ¬¡æœºä¼šï¼Œå¹¶ä¸”5ç§’å†…æ— ååº”ï¼Œåˆ™è¶…æ—¶æŸ¥è¯¢å¤±è´¥ã€‚

           å½“æ“ä½œç³»ç»Ÿçš„DNSå¤±æ•ˆï¼Œè€Œç”±äºç¿»å¢™åŸå› ï¼Œå¯¼è‡´æ— æ³•è®¿é—®googleçš„DNSæœåŠ¡å™¨ï¼Œå°±ä¼šå¯¼è‡´æ— æ³•è§£æä¸»æœºã€‚

    è§£å†³åŠæ³•ï¼šå°†åœ°å€è§£æå™¨è®¾ç½®ä¸ºjvm,è€Œä¸æ˜¯vertxè‡ªå¸¦çš„è§£æå™¨ã€‚
             å¦‚æœæ˜¯Java -jar æ–¹å¼å¯åŠ¨ï¼Œåˆ™å¯ä»¥æ·»åŠ å¯åŠ¨å‚æ•° -Dvertx.disableDnsResolver=true


ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿
vertx.x-service-proxyæ ¸å¿ƒæ€æƒ³ï¼šã€å¤šä¸ªç‹¬ç«‹æ¨¡å—ã€‘
    åˆ›å»ºæœåŠ¡ä»£ç†ï¼š
        1.vertxæœåŠ¡åŒ–çš„åŸºç¡€ï¼Œå‡†å¤‡ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾æ‰€æœ‰æœåŠ¡
        2.å‡†å¤‡ä¸€ä¸ªpackage.javaçš„æ™®é€šæ–‡ä»¶ï¼Œè¯´æ˜è¿™ä¸ªæ–‡ä»¶æœåŠ¡åŒ–ï¼Œå¹¶æŒ‡å®šæœåŠ¡åç§°
        3.åœ¨æ–‡ä»¶å¤¹ä¸­æ·»åŠ æ¥å£æœåŠ¡ï¼Œåœ¨æ¥å£ä¸­å¢åŠ ä»£ç†æ³¨è§£å’Œé™æ€å®ä¾‹æ–¹æ³•ï¼Œ
        4.é…ç½®pom.xmlä¸­çš„è‡ªåŠ¨ç”Ÿæˆä»£ç æ“ä½œï¼Œæ‰§è¡Œmvn clean package,å°†è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»ã€‚
        æ€»è€Œè¨€ä¹‹ï¼šæ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªç›®å½•ï¼Œ1ä¸ªæ¥å£ï¼Œ1ä¸ªæ¨¡å—åŒ–æ–‡ä»¶ã€‚

    å…¬å¼€æœåŠ¡å¹¶æŒ‡å®šæœåŠ¡çš„å®ç°ç±»ï¼š
        1.æœ€å¥½åœ¨åŒä¸€ç›®å½•ä¸‹åˆ›å»ºæ¥å£çš„å®ç°ç±»
        2.æœ€å¥½åœ¨åŒä¸€ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªverticleï¼Œè¯¥ç±»å°†æœåŠ¡è¿›è¡Œæ³¨å†Œï¼Œä¿¡æ¯åŒ…æ‹¬(æœåŠ¡åï¼Œæ¥å£ï¼Œå®ç°ç±»)

    æµ‹è¯•æœåŠ¡ä»£ç†çš„ä½¿ç”¨ï¼š
        1.é¦–å…ˆéœ€è¦éƒ¨ç½²Verticleï¼Œå› ä¸ºè¿™æŒ‡å®šäº†ä»£ç†ç±»æœ€ç»ˆæ‰§è¡Œçš„åœ°æ–¹
        2.åˆ›å»ºä¸€ä¸ªæœåŠ¡çš„ä»£ç†ç±»ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ã€‚
        3.ç›´æ¥è°ƒç”¨æœåŠ¡çš„å…·ä½“æ–¹æ³•ã€‚
        æµç¨‹ï¼š
            åˆ›å»ºæœåŠ¡--ã€‹
            æœåŠ¡ç”±ä»£ç†ç±»å®ç°--ã€‹
            ä»£ç†ç±»é€šè¿‡eventbuså‘é€æ¶ˆæ¯ç»™å…·ä½“çš„æœåŠ¡åœ°å€--ã€‹
            verticleä¸Šæ³¨å†Œçš„è¯¥åœ°å€çš„æœåŠ¡çš„å…·ä½“å®ç°ç±»è¿›è¡Œè°ƒç”¨ã€‚
        æ³¨æ„ï¼šæœåŠ¡æ¥å£ï¼Œåˆ›å»ºå®ç°ç±»å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œè°ƒç”¨å…·ä½“æ–¹æ³•ã€‚
             æœåŠ¡æ¥å£ï¼Œåˆ›å»ºä»£ç†ç±»å¯¹è±¡ï¼Œé€šè¿‡å‘é€äº‹ä»¶æ¶ˆæ¯ï¼Œç”±éƒ¨ç½²çš„verticleçš„å®ç°ç±»è°ƒç”¨æ–¹æ³•ã€‚å¦‚æœä¸éƒ¨ç½²verticleï¼Œå°†ä¼šæŠ¥é”™æ‰¾ä¸åˆ°å‘é€æ¶ˆæ¯çš„åœ°å€ã€‚

    HttpVerticleæœåŠ¡çš„ä½¿ç”¨ï¼š
        1.åˆ›å»ºä¸€ä¸ªverticleï¼Œåœ¨start()æ–¹æ³•ä¸­æ³¨å†Œè·¯ç”±ï¼Œç›‘å¬ç«¯å£ã€‚å¹¶ä¸”åˆ›å»ºæœåŠ¡ä»£ç†ç±»ã€‚
        2.åœ¨æŒ‡å®šURLçš„å¤„ç†å¥æŸ„æ–¹æ³•ä¸­ï¼Œè°ƒç”¨æœåŠ¡ä»£ç†ç±»çš„æ–¹æ³•ï¼Œå°†è¿”å›ç»“æœç»„è£…æˆé¡µé¢æ•°æ®è¿”å›ã€‚
        3.åˆ›å»ºæµ‹è¯•æ–¹æ³•ï¼Œé¦–å…ˆå°†httpverticleå’Œå®ƒä¾èµ–çš„verticleè¿›è¡Œéƒ¨ç½²ï¼Œç„¶ååˆ›å»ºhttpclientï¼Œå‘é€ä¸€ä¸ªhttpè¯·æ±‚ï¼Œè§¦å‘httpverticleçš„æœåŠ¡æ–¹æ³•ï¼Œé€çº§è°ƒç”¨åè¿”å›ç»“æœã€‚


    åˆ›å»ºä»£ç†ç±»çš„ä¸¤ç§æ–¹æ³•ï¼š
        1.åœ¨ç¼–å†™pom.xmlä¾èµ–æ—¶ï¼Œå¢åŠ <classifier>ã€‚å°†ä¼šåœ¨targetçš„generate-classç›®å½•ä¸‹ç”Ÿæˆä»£ç†ç±»ã€‚
            <dependency>
                <groupId>io.vertx</groupId>
                    <artifactId>vertx-codegen</artifactId>
                    <version>3.7.0</version>
                    <classifier>processor</classifier>
            </dependency>

        2.åœ¨ç¼–å†™pom.xmlæ’ä»¶æ—¶ï¼Œå¢åŠ <annotationProcessor>ï¼Œå°†ä¼šåœ¨æŒ‡å®šçš„ç›®å½•ä¸‹ç”Ÿæˆä»£ç†ç±»ï¼Œè€Œä¸æ˜¯targetç›®å½•ä¸‹ã€‚
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <annotationProcessors>
                        <annotationProcessor>io.vertx.codegen.CodeGenProcessor</annotationProcessor>
                    </annotationProcessors>
                </configuration>
            </plugin>

        å…·ä½“çš„ä»£ç†çš„å†™æ³•ï¼šğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ï¼ï¼ï¼
            1.åœ¨æ¥å£ä¸­å†™é™æ€æ–¹æ³•ï¼Œåˆ›å»ºä»£ç†ç±»ã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚æ¯”å¦‚ï¼š
                static SomeDatabaseService createProxy(Vertx vertx, String address) {
                    return new SomeDatabaseServiceVertxEBProxy(vertx, address);
                }

            2.åœ¨éœ€è¦ä½¿ç”¨çš„verticleä¸­ï¼Œåˆå§‹åŒ–æ¥å£å¯¹è±¡ã€‚è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»ã€‚å¥½å¤„æ˜¯ä¸ç”¨ç›´æ¥new ä»£ç†ç±»ã€‚æ¯”å¦‚ï¼š
                SomeDatabaseService service2 = builder.setOptions(options).build(SomeDatabaseService.class);


æœåŠ¡æ¥å£æ–¹æ³•çš„çº¦æŸï¼š
    1.è¿”å›å€¼åªèƒ½æ˜¯void æˆ–è€… @Fluentæ³¨è§£çš„thisæœåŠ¡ç±»
    2.å‚æ•°çš„ç±»å‹ï¼šJSON=JsonObject,JsonArray
                åŸå§‹ç±»å‹å’Œå®ƒçš„è£…ç®±æ“ä½œ,
                List<?>
                Set<?>
                Map<String,?>
                æšä¸¾
                @DataObjectæ³¨è§£çš„å¯¹è±¡
    3.è¿”å›çš„å¼‚æ­¥ç»“æœå‚æ•°ï¼šHandler<AsyncResult<R>>ã€‚Rçš„å–å€¼å’Œå‚æ•°çš„ç±»å‹ä¸€è‡´ã€‚è€Œä¸”å¢åŠ ä¸€ä¸ªä»£ç†å¯¹è±¡
    4.æ¥å£ä¸­çš„æ–¹æ³•ä¸èƒ½æœ‰é‡è½½æ–¹æ³•ï¼Œå› ä¸ºä¸€ä¸ªæ–¹æ³•åªèƒ½æœ‰ä¸€ä¸ªåå­—ã€‚åœ¨è¿œç«¯ç”¨æ¥è°ƒç”¨æ—¶ã€‚









