å­¦ä¹ vert.x Configï¼š
    1.æ¦‚å¿µï¼šä¸ºvert.xçš„å¼‚æ­¥åº”ç”¨æä¾›é…ç½®ã€‚
        ä½¿ç”¨åœºæ™¯ï¼šåœ¨å…¬å¸çš„é¡¹ç›®ä¸­ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®verticleçš„åå­—å’Œé…ç½®é€‰é¡¹ã€‚
                 é…ç½®pgsqlçš„æ‰§è¡Œè¯­å¥

    2.é…ç½®è¯­æ³•ï¼šjson,propertieæ–‡ä»¶ï¼Œyamlæ–‡ä»¶ç­‰
      é…ç½®å­˜å‚¨ï¼šæ–‡ä»¶ï¼Œç›®å½•ï¼Œhttp,git redis,ç³»ç»Ÿå±æ€§å’Œç¯å¢ƒå±æ€§
      å®šä¹‰å¤„ç†é¡ºåºå’Œé‡è½½ï¼Œæ”¯æŒè¿è¡Œæ—¶é‡æ–°é…ç½®
    3.é…ç½®æ£€ç´¢å™¨ï¼š<dependency>
                 <groupId>io.vertx</groupId>
                 <artifactId>vertx-config</artifactId>
                 <version>3.7.0</version>
                </dependency>
        ConfigRetriever retriever = ConfigRetriever.create(vertx);

    4.åˆ›å»ºé…ç½®æ£€ç´¢å™¨å®ä¾‹ï¼š
        æŒ‰æŒ‡å®šé¡ºåºï¼šconfig()
                  ç³»ç»Ÿå±æ€§
                  ç¯å¢ƒå˜é‡
                  conf/config.jsonæ–‡ä»¶ æˆ–è€…vertx-config-pathç³»ç»Ÿå±æ€§ æˆ–è€… VERTX_CONFIG_PATH ç¯å¢ƒå˜é‡

        ConfigStoreOptions httpStore = new ConfigStoreOptions()
            .setType("http")
            .setConfig(new JsonObject()
              .put("host", "localhost").put("port", 8080).put("path", "/conf"));

          ConfigStoreOptions fileStore = new ConfigStoreOptions()
            .setType("file")
            .setOptional(true)  //è¯´æ˜å¯é€‰ä¸å¦
            .setConfig(new JsonObject().put("path", "my-config.json"));

          ConfigStoreOptions sysPropsStore = new ConfigStoreOptions().setType("sys");

          ConfigRetrieverOptions options = new ConfigRetrieverOptions()
            .addStore(httpStore)
            .addStore(fileStore)
            .addStore(sysPropsStore);

          ConfigRetriever retriever = ConfigRetriever.create(vertx, options);

    5.æ£€ç´¢å¯¹è±¡çš„ä½¿ç”¨ï¼šğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿
        å¯ä»¥é…ç½®verticleçš„å®ä¾‹
        retriever.getConfig(ar -> {
          if (ar.failed()) {
            // Failed to retrieve the configuration
          } else {
            JsonObject config = ar.result();
          }
        });

    6.é‡è½½è§„åˆ™ï¼šjsonçš„åˆå¹¶æ–¹æ³•ï¼Œåè€…è¦†ç›–å‰è€…çš„åŒåkey
        æ¯”å¦‚ï¼šA={a:value,b:1}
             B={a:value1,c:2}
        å£°æ˜é¡ºåº(A,B)ï¼Œç»“æœç­‰äº{a:value, b:1, c:2}.å£°æ˜é¡ºåº(B,A),ç»“æœç­‰äº{a:value, b:1, c:2}

    7.ç›‘å¬é…ç½®çš„æ›´æ”¹:
        ConfigRetrieverOptions options = new ConfigRetrieverOptions()
          .setScanPeriod(2000)  //é…ç½®çš„æ‰«æé—´éš”æ—¶é—´
          .addStore(store1)
          .addStore(store2);

        retriever.listen(change -> {
            JsonObject previous = change.getPreviousConfiguration();
            JsonObject json = change.getNewConfiguration();
        });

    8.åˆé€‚çš„é…ç½®å­˜å‚¨ï¼š
        File:
            ConfigStoreOptions file = new ConfigStoreOptions()
              .setType("file")
              .setFormat("properties")
              .setConfig(new JsonObject().put("path", "path-to-file.properties")
                                         .put("raw-data", true)
                                         .put("hierarchical", true));
        JSON:
            ConfigStoreOptions json = new ConfigStoreOptions()
              .setType("json")
              .setConfig(new JsonObject().put("key", "value"));
        Environment Variables:
            ConfigStoreOptions json = new ConfigStoreOptions()
              .setType("env")
              .setConfig(new JsonObject().put("keys", new JsonArray()
                                                            .add("SERVICE1_HOST")
                                                            .add("SERVICE2_HOST")
                                            )
                        );
        System Properties:
            ConfigStoreOptions json = new ConfigStoreOptions()
              .setType("sys")
              .setConfig(new JsonObject().put("cache", "false"));
        HTTP:
            ConfigStoreOptions http = new ConfigStoreOptions()
              .setType("http")
              .setConfig(new JsonObject()
                .put("host", "localhost")
                .put("port", 8080)
                .put("ssl", true)
                .put("path", "/A"));
        Event Bus:
            ConfigStoreOptions eb = new ConfigStoreOptions()
              .setType("event-bus")
              .setConfig(new JsonObject()
                .put("address", "address-getting-the-conf")
              );
        Directoryï¼šè¯»å–å¤šä¸ªé…ç½®æ–‡ä»¶
            ConfigStoreOptions dirWithRawData = new ConfigStoreOptions()
              .setType("directory")
              .setConfig(new JsonObject().put("path", "config")
                .put("filesets", new JsonArray()
                  .add(new JsonObject().put("pattern", "dir/*json"))
                  .add(new JsonObject().put("pattern", "dir/*.properties")
                    .put("format", "properties").put("raw-data", true))
                ));

    9.è¯»å–æœ€æ–°é…ç½®ï¼šJsonObject last = retriever.getCachedConfig();
    10.æµå½¢å¼è¯»å–é…ç½®ï¼š
        ConfigRetrieverOptions options = new ConfigRetrieverOptions()
          .setScanPeriod(2000)
          .addStore(store1)
          .addStore(store2);

        ConfigRetriever retriever = ConfigRetriever.create(Vertx.vertx(), options);
        retriever.configStream()
          .endHandler(v -> {
            // retriever closed
          })
          .exceptionHandler(t -> {
            // an error has been caught while retrieving the configuration
          })
          .handler(conf -> {
            // the configuration
          });
    11.æ£€ç´¢é…ç½®çš„ç»“æœä½œä¸ºFuture
        Future<JsonObject> future = ConfigRetriever.getConfigAsFuture(retriever);
        future.setHandler(ar -> {
          if (ar.failed()) {
            // Failed to retrieve the configuration
          } else {
            JsonObject config = ar.result();
          }
        });
    12.ä½¿ç”¨yamlé…ç½®ï¼š
        éœ€è¦æ·»åŠ jaråŒ…ä¾èµ–ï¼šcompile 'io.vertx:vertx-config:3.8.3'
                         compile 'io.vertx:vertx-config-yaml:3.8.3'

        ConfigStoreOptions store = new ConfigStoreOptions()
          .setType("file")
          .setFormat("yaml")
          .setConfig(new JsonObject()
            .put("path", "my-config.yaml")
          );
    13.ä½¿ç”¨gité…ç½®ï¼šè·å–è¿œç«¯çš„jsonæ–‡ä»¶
        ConfigStoreOptions git = new ConfigStoreOptions()
            .setType("git")
            .setConfig(new JsonObject()
                .put("url", "https://github.com/cescoffier/vertx-config-test.git")
                .put("path", "local")
                .put("filesets",
                    new JsonArray().add(new JsonObject().put("pattern", "*.json"))));
    14.ä½¿ç”¨redisé…ç½®ï¼š
        ConfigStoreOptions store = new ConfigStoreOptions()
            .setType("redis")
            .setConfig(new JsonObject()
                .put("host", "localhost")
                .put("port", 6379)
                .put("key", "my-configuration")
            );













